{"mappings":"YAAA,IAAMA,EAAOC,SAASC,cAAc,QAC9BC,EAAOF,SAASC,cAAc,SAC9BE,EAASH,SAASC,cAAc,SAKlCG,EAAc,EACdC,EAAU,GAoBd,SAASC,EAAUC,EAAMC,IAlBzB,SAAoBD,EAAME,GACxB,IAAMC,EAAS,IAAIC,gBAAgB,CACjCC,OAPQ,mCAQRL,OACAM,QAAAJ,EACAK,KAAM,KAGR,OAAOC,MAAM,GAAeC,OAdb,wDAcU,KAAUA,OAAPN,IACzBO,MAAK,SAACC,GACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,M,IAEjBC,OAAM,SAACC,G,OAAUC,QAAQC,IAAIF,E,KAIhCG,CAAWpB,EAAMC,GAASS,MAAK,SAACW,G,IAQfC,EAPfJ,QAAQC,IAAIE,EAAKrB,KAAKuB,eAEU,IAA5BF,EAAKrB,KAAKuB,gBACZ3B,EAAO4B,UAAUC,IAAI,aACrBC,MAAM,kCAA0CjB,OAARR,KAG1C,IAAM0B,EAASN,SAAe,QAAfC,EAAAD,EAAMO,iBAAS,IAAfN,OAAA,EAAAA,EAAiBK,OAKhC,GAJIA,GAgBR,SAAsBA,GACpB,IAAME,EAASF,EACZG,KAAI,SAAAC,G,IAAGC,EAAID,EAAJC,KAAMC,EAAMF,EAANE,OACZ,MAAO,uBAC0BxB,OAAvBwB,EAAO,GAAGC,IAAI,WACrBzB,OAD8BuB,EAAK,2BAC9BvB,OAALuB,EAAK,kB,IAGTG,KAAK,IACRxC,EAAKyC,mBAAmB,YAAaP,E,CAxBjCQ,CAAaV,GAGX9B,IAAgBwB,EAAKrB,KAAKsC,WAAa,EAGzC,OAFA1C,EAAO4B,UAAUC,IAAI,kBACrBC,MAAM,UAGR7B,GAAe,EACXwB,EAAKrB,KAAKsC,WAAa,GACzB1C,EAAO4B,UAAUe,OAAO,Y,IAiB9B/C,EAAKgD,iBAAiB,UAAU,SAACC,GAC/BA,EAAMC,iBACN,IAAMC,EAAQF,EAAMG,OAAOC,SAASF,MAAMG,MAC1ChD,EAAU6C,EACV9C,EAAc,EACdF,EAAKoD,UAAY,GACZJ,GAGL5C,EAAUF,EAAa8C,E,IAGzB/C,EAAO4C,iBAAiB,SAAS,WAC/BzC,EAAUF,EAAaC,E","sources":["src/index.js"],"sourcesContent":["const form = document.querySelector(\"form\");\nconst list = document.querySelector(\".list\");\nconst button = document.querySelector(\".more\");\n\nconst BASE_URL = \"https://app.ticketmaster.com/discovery/v2/events.json\";\nconst API = \"9cTjAjlRB53wyhAFk5VzXcBu5GiPU6fK\";\n\nlet pageToFetch = 0;\nlet keyword = \"\";\n\nfunction fetchEvent(page, keyword) {\n  const params = new URLSearchParams({\n    apikey: API,\n    page,\n    keyword,\n    size: 40,\n  });\n\n  return fetch(`${BASE_URL}?${params}`)\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .catch((error) => console.log(error));\n}\n\nfunction getEvents(page, keyword) {\n  fetchEvent(page, keyword).then((data) => {\n    console.log(data.page.totalElements);\n\n    if (data.page.totalElements === 0) {\n      button.classList.add(\"invisible\");\n      alert(`There are no events by keyword ${keyword}`);\n    }\n\n    const events = data?._embedded?.events;\n    if (events) {\n      renderEvents(events);\n    }\n\n    if (pageToFetch === data.page.totalPages - 1) {\n      button.classList.add(\"invisible\");\n      alert(\"Finish\");\n      return;\n    }\n    pageToFetch += 1;\n    if (data.page.totalPages > 1) {\n      button.classList.remove(\"invisible\");\n    }\n  });\n}\n\nfunction renderEvents(events) {\n  const markup = events\n    .map(({ name, images }) => {\n      return `<li>\n    <img src='${images[0].url}' alt='${name}' width='200'>\n    <p>${name}</p>\n    </li>`;\n    })\n    .join(\"\");\n  list.insertAdjacentHTML(\"beforeend\", markup);\n}\n\nform.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n  const query = event.target.elements.query.value;\n  keyword = query;\n  pageToFetch = 0;\n  list.innerHTML = \"\";\n  if (!query) {\n    return;\n  }\n  getEvents(pageToFetch, query);\n});\n\nbutton.addEventListener(\"click\", () => {\n  getEvents(pageToFetch, keyword);\n});\n"],"names":["$b8f9b7833fa37166$var$form","document","querySelector","$b8f9b7833fa37166$var$list","$b8f9b7833fa37166$var$button","$b8f9b7833fa37166$var$pageToFetch","$b8f9b7833fa37166$var$keyword","$b8f9b7833fa37166$var$getEvents","page","keyword2","keyword1","params","URLSearchParams","apikey","keyword","size","fetch","concat","then","response","ok","Error","status","json","catch","error","console","log","$b8f9b7833fa37166$var$fetchEvent","data","ref","totalElements","classList","add","alert","events","_embedded","markup","map","param","name","images","url","join","insertAdjacentHTML","$b8f9b7833fa37166$var$renderEvents","totalPages","remove","addEventListener","event","preventDefault","query","target","elements","value","innerHTML"],"version":3,"file":"index.ba0cd70c.js.map"}