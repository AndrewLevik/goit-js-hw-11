{"mappings":"AAAA,MAAMA,EAAOC,SAASC,cAAc,QAC9BC,EAAOF,SAASC,cAAc,SAC9BE,EAASH,SAASC,cAAc,cAKtC,IAAIG,EAAc,EACdC,EAAU,GAoBd,SAASC,EAAUC,EAAMC,IAlBzB,SAAoBD,EAAME,GACxB,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,OAPQ,mC,KAQRL,EACAM,QAAAJ,EACAK,KAAM,KAGR,OAAOC,MAAM,yDAAeL,KACzBM,MAAMC,IACL,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,QAE3B,OAAOH,EAASI,MAAM,IAEvBC,OAAOC,GAAUC,QAAQC,IAAIF,I,EAIhCG,CAAWnB,EAAMC,GAASQ,MAAMW,I,IAQfC,EAPfJ,QAAQC,IAAIE,EAAKpB,KAAKsB,eAEU,IAA5BF,EAAKpB,KAAKsB,gBACZ1B,EAAO2B,UAAUC,IAAI,aACrBC,MAAM,kCAAkCxB,MAG1C,MAAMyB,EAASN,SAAe,QAAfC,EAAAD,EAAMO,iBAAS,IAAfN,OAAA,EAAAA,EAAiBK,OAKhC,GAJIA,GAgBR,SAAsBA,GACpB,MAAME,EAASF,EACZG,KAAI,EAACC,KAAEA,EAAIC,OAAEA,KACL,uBACGA,EAAO,GAAGC,aAAaF,2BAC9BA,qBAGJG,KAAK,IACRtC,EAAKuC,mBAAmB,YAAaN,E,CAxBjCO,CAAaT,GAGX7B,IAAgBuB,EAAKpB,KAAKoC,WAAa,EAGzC,OAFAxC,EAAO2B,UAAUC,IAAI,kBACrBC,MAAM,UAGR5B,GAAe,EACXuB,EAAKpB,KAAKoC,WAAa,GACzBxC,EAAO2B,UAAUc,OAAO,YAAY,G,CAiB1C7C,EAAK8C,iBAAiB,UAAWC,IAC/BA,EAAMC,iBACN,MAAMC,EAAQF,EAAMG,OAAOC,SAASF,MAAMG,MAC1C9C,EAAU2C,EACV5C,EAAc,EACdF,EAAKkD,UAAY,GACZJ,GAGL1C,EAAUF,EAAa4C,EAAM,IAG/B7C,EAAO0C,iBAAiB,SAAS,KAC/BvC,EAAUF,EAAaC,EAAQ","sources":["src/index.js"],"sourcesContent":["const form = document.querySelector(\"form\");\nconst list = document.querySelector(\".list\");\nconst button = document.querySelector(\".load-more\");\n\nconst BASE_URL = \"https://app.ticketmaster.com/discovery/v2/events.json\";\nconst API = \"9cTjAjlRB53wyhAFk5VzXcBu5GiPU6fK\";\n\nlet pageToFetch = 1;\nlet keyword = \"\";\n\nfunction fetchEvent(page, keyword) {\n  const params = new URLSearchParams({\n    apikey: API,\n    page,\n    keyword,\n    size: 40,\n  });\n\n  return fetch(`${BASE_URL}?${params}`)\n    .then((response) => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    })\n    .catch((error) => console.log(error));\n}\n\nfunction getEvents(page, keyword) {\n  fetchEvent(page, keyword).then((data) => {\n    console.log(data.page.totalElements);\n\n    if (data.page.totalElements === 0) {\n      button.classList.add(\"invisible\");\n      alert(`There are no events by keyword ${keyword}`);\n    }\n\n    const events = data?._embedded?.events;\n    if (events) {\n      renderEvents(events);\n    }\n\n    if (pageToFetch === data.page.totalPages - 1) {\n      button.classList.add(\"invisible\");\n      alert(\"Finish\");\n      return;\n    }\n    pageToFetch += 1;\n    if (data.page.totalPages > 1) {\n      button.classList.remove(\"invisible\");\n    }\n  });\n}\n\nfunction renderEvents(events) {\n  const markup = events\n    .map(({ name, images }) => {\n      return `<li>\n    <img src='${images[0].url}' alt='${name}' width='200'>\n    <p>${name}</p>\n    </li>`;\n    })\n    .join(\"\");\n  list.insertAdjacentHTML(\"beforeend\", markup);\n}\n\nform.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n  const query = event.target.elements.query.value;\n  keyword = query;\n  pageToFetch = 0;\n  list.innerHTML = \"\";\n  if (!query) {\n    return;\n  }\n  getEvents(pageToFetch, query);\n});\n\nbutton.addEventListener(\"click\", () => {\n  getEvents(pageToFetch, keyword);\n});\n"],"names":["$1f0dc3b9307be026$var$form","document","querySelector","$1f0dc3b9307be026$var$list","$1f0dc3b9307be026$var$button","$1f0dc3b9307be026$var$pageToFetch","$1f0dc3b9307be026$var$keyword","$1f0dc3b9307be026$var$getEvents","page","keyword2","keyword1","params","URLSearchParams","apikey","keyword","size","fetch","then","response","ok","Error","status","json","catch","error","console","log","$1f0dc3b9307be026$var$fetchEvent","data","ref","totalElements","classList","add","alert","events","_embedded","markup","map","name","images","url","join","insertAdjacentHTML","$1f0dc3b9307be026$var$renderEvents","totalPages","remove","addEventListener","event","preventDefault","query","target","elements","value","innerHTML"],"version":3,"file":"index.41b857fe.js.map"}